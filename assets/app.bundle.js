!async function(e,t){"use strict";function n(e){!function(e,...t){console.groupCollapsed(e),t.forEach(e=>console.log(e)),console.groupEnd()}("mt.performance",`${e.type} -> ${performance.now()}`)}function o(e){e.preventDefault(),FloatLinkModal(e.target.href)}for(document.addEventListener("DOMContentLoaded",e=>{var o,l;[HTMLAnchorElement,HTMLAreaElement,HTMLAudioElement,HTMLBRElement,HTMLBaseElement,HTMLBodyElement,HTMLButtonElement,HTMLCanvasElement,HTMLDListElement,HTMLDataElement,HTMLDataListElement,HTMLDialogElement,HTMLDivElement,HTMLDocument,HTMLElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFormControlsCollection,HTMLFormElement,HTMLFrameSetElement,HTMLHRElement,HTMLHeadElement,HTMLHeadingElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLLIElement,HTMLLabelElement,HTMLLegendElement,HTMLLinkElement,HTMLMapElement,HTMLMediaElement,HTMLMetaElement,HTMLMeterElement,HTMLModElement,HTMLOListElement,HTMLObjectElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOptionsCollection,HTMLOutputElement,HTMLParagraphElement,HTMLPictureElement,HTMLPreElement,HTMLProgressElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableColElement,HTMLTableElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTemplateElement,HTMLTextAreaElement,HTMLTimeElement,HTMLTitleElement,HTMLTrackElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement,].forEach(e=>{e.prototype.query=Function("s","return document.querySelectorAll(s)"),e.prototype.query0=Function("s","return document.querySelector(s)"),e.prototype.is=Function("s","return document.querySelector(`[is*='${s}']`)"),e.prototype.is0=Function("s","return document.querySelector(`[is='${s}']`)")}),o=()=>{let e=query("link").length+query("script").length;console.debug(`%c[loaded]%c ${1===String(e).length?`0${e}`:e} sources`,"color: rgb(5, 7, 7); background: rgb(246, 247, 250)","color: rgb(195, 195, 195); background: rgb(5, 7, 7)")},__dev__()&&o(),n(e),l=()=>(function(...e){for(let t=0;t<e.length;t++)e[t](),console.log(`call: ${e.length}`)})(...t),console.groupCollapsed("mt?.fabs"),l(),console.groupEnd(),query0("html").lang="en"}),window.onload=e=>{n(e),function(e){let t={};ObjectDefinition({baseSymbol:"town",keepAtLog:["class","style"],placeholderOfTerminal:"placeholder",animateCli:["cliInvi","cliHide"],fadeout:"fadeoutMsg",exadCdn:"https://cdn.mesatown.org"}),SetLogger("logger"),SetTerminal("terminal"),SetScrollable("scroll"),SetRender("#render"),SetLinkModal([{type:0,component:is("modal link")},{type:1,details:"connect",component:is("modal-0")},{type:1,details:"cancel",component:is("modal-1")},{type:1,details:"cancel",component:is("modal_blank")},],{cancel:(e,t)=>t.dataset.modalState=0,connect(e,t){let n=t.is0("modal-url").textContent;window.open(n,"_blank"),t.dataset.modalState=0}}),AddLibraries(...e),bind("@enter",()=>{let e=is("terminal");document.activeElement!==e&&e.focus()}),bind("tab",e=>{e.preventDefault();let n=is("terminal"),o=/\ufeff/.test(n.textContent)?"\uFEFF":"",l=n.textContent.replace(/\ufeff/,""),r=Object.keys(lib);if(document.activeElement===n&&0<l.length&&!lib[l]){t.ac_spell=l,t.ac_index=0;let i=r.filter(e=>e.startsWith(l)).sort(),a=i[t.ac_index];void 0!==a&&(n.textContent=`${o}${a}`)}else if(t.ac_index>=0&&0<l.length){t.ac_index+=1;let s=r.filter(e=>e.startsWith(t.ac_spell)).sort(),d=s[t.ac_index];void 0===d&&(t.ac_index=0,d=s[t.ac_index]),n.textContent=`${o}${d}`}!function(e){let t=window.getSelection(),n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),n.collapse(!1),t.addRange(n),e.focus()}(n)})}(["./e/readme.js"]),-1!=platform.name.indexOf("Safari")&&"pure"===query0("body").dataset.framework&&(console.warn("The bug has been found where elements are not visible when scrolling in Safari."),deb("⚠ The bug has been found where elements are not visible when scrolling in Safari.",{color:"rgb(136, 55, 56)",duration:0}))};;){let l=query("a");for(let r=0;r<l.length;r++)l[r].onclick&&l[r].onclick===o||(l[r].onclick=o);"abdit"!==globalThis.eval&&reload(),await new Promise(e=>setTimeout(e,10))}}((()=>{let e={__version__:"0.6",__dev__:Function("return !!localStorage.getItem('has-dev-mode')"),eval:"abdit",query:Function("s","return document.querySelectorAll(s)"),query0:Function("s","return document.querySelector(s)"),is:Function("s","return document.querySelector(`[is*='${s}']`)"),is0:Function("s","return document.querySelector(`[is='${s}']`)"),reload:Function("location.reload()")};return!function(){for(let t in e)globalThis[t]=e[t]}(),e})(),[function(){let e=null,t=/close|home/,n=document.querySelector("#command-label");function o(e,t){if(e.require&&t.length>0){let n=[];for(let o=0;o<e.require.length;o++){let l=e.require[o].toLowerCase(),r=/str|string/.test(l)?"string":/num|number|numeric/.test(l)?"number":/bool|boolean/.test(l)?"boolean":/any/.test(l)?"any":"undefined";if(n.push(r),/\w+\*$/.test(l)){for(let i=0;i<t.length-(o+1);i++)n.push(r);break}}if(t.length>=n.length){let a=!1;for(let s=0;s<n.length;s++)switch(n[s]){case"string":t[s]=String(t[s]);break;case"number":a=!/^\d+$/.test(t[s]),t[s]=Number(parseInt(t[s]));break;case"boolean":a=!/^(true|false)$/i.test(t[s]),t[s]=Boolean(/true/i.test(t[s]));break;case"any":t[s]=/^(true|false)$/i.test(t[s])?Boolean(/true/i.test(t[s])):/^\d+$/.test(t[s])?Number(parseInt(t[s])):String(t[s])}a||e.execute(t)}}else{if(e.require&&!(e.require.length<=0))return{unsatisfied:e=>e()};e.execute()}return{unsatisfied(){}}}function l(e="",t,n,o){t||(t="");let l=e.substring(0,n),r=e.substring(n+1,e.length);return n>=o?e.substring(0,o):`${l}${t}${r}`}function r(o){if(t.test(o)&&(o=e),n){let r=n.textContent,[i,a]=[r.split(""),o.split("")].map(e=>e.length),s=0<=i-a?i:a;for(let d=0;d<s;d++)(e=>{setTimeout(()=>{r=l(r,o[e],e,a),n.textContent=r},80*(e/1.257))})(d)}}globalThis.PostCommand=l=>{e||(e=define.get("baseSymbol")),(function(e){let t=`${e}␛`.split("").filter(e=>!/\ufeff/.test(e)),n=[],o=[],l=[],r=!1,i=!1,a=!1;for(let s=0;s<t.length;s++){if(/\u241B/.test(t[s])){l.push(o.join("")),n.push(l.filter(e=>e)),o=[],l=[];break}a?(o.push(t[s]),a=!1):/\%/.test(t[s])?r||i||(l.push(o.join("")),n.push(l.filter(e=>e)),o=[],l=[]):/[']/.test(t[s])?r||i?r?(l.push(o.join("")),o=[],r=!1):o.push(t[s]):r=!0:/["]/.test(t[s])?r||i?i?(l.push(o.join("")),o=[],i=!1):o.push(t[s]):i=!0:/\\/.test(t[s])?a?(o.push(t[s]),a=!1):a=!0:/\s/.test(t[s])?r||i?o.push(t[s]):(l.push(o.join("")),o=[]):o.push(t[s])}return{end:e=>n.forEach(t=>e(t))}})(l).end(l=>{let[i,...a]=l,s=n.textContent.replace(/\s+/g,"");if(s!==e&&lib[s]){let d=lib[s]();t.test(i)?(d.oncomplete&&d.oncomplete(),r(e),SetPlaceholder&&SetPlaceholder()):lib[s]&&o(d,[i,...a]).unsatisfied(()=>{})}else if(!t.test(i)&&lib[i]){let c=lib[i]();o(c,a).unsatisfied(()=>{a.length<=0&&(c.onstart&&c.onstart(),r(i),SetPlaceholder&&c.meta.tip&&SetPlaceholder(c.meta.tip))})}else if(t.test(i)){let u=lib[i]();u.oncomplete&&u.oncomplete(),r(e),SetPlaceholder&&SetPlaceholder()}})}},function(){globalThis.define={},globalThis.ObjectDefinition=e=>{globalThis.define.get=function(e){return globalThis.define[e]},globalThis.define.exist=function(e){return!!globalThis.define[e]},e=Object.entries(e);for(let t=0;t<e.length;t++){let[n,o]=e[t];globalThis.define[n]=o}}},function(){let e={};globalThis.unbind=function(t){delete e[t]},globalThis.bind=function(t,n){e[t]=n,function(e,t=[]){t.forEach(t=>{window[`on${t}`]||(window[`on${t}`]=t=>(function(e,t){let n=Object.keys(t);n.forEach(n=>{let o=function(e){e=e.toLowerCase();let t=/^@/.test(e)?1:0;e=t>0?e.replace(/^(@)/,""):e;let n={key:null,ctrl:!1,shift:!1,alt:!1,meta:!1,type:1===t?"keyup":0===t?"keydown":"input"},o=e.split(/\+/);for(let l=0;l<o.length;l++){let r=o[l],i=o.length-1;l===i&&(n.key=r),r in n&&(n[r]=!0)}return n}(n);e.key.toLowerCase()===o.key&&e.type===o.type&&e.altKey===o.alt&&e.ctrlKey===o.ctrl&&e.metaKey===o.meta&&e.shiftKey===o.shift&&t[n](e)})})(t,e))})}(e,["keyup","keydown"])}},function(){let e=new Proxy({},{get:(e,t)=>t in e?e[t]:void 0,set(e,t,n){let o=n().onload;o&&o(),e[t]=n}});async function t(e,t,n){t||(t=/.+\/([\w\d]+)/.exec(e)[1]),n||(n="main");let o=await fetch(e).then(e=>e.text());return`(()=>{${o};globalThis.lib.${t}=${n}})()`.replace(/\r\n\s+/g,"\r\n ")}async function n(e){e=/((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$)|(^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))|(\u006c\u006f\u0063\u0061\u006c\u0068\u006f\u0073\u0074)/gm.test(location.hostname)?e:e.replace(/^\./,define.get("exadCdn")??"https://cdn.mesatown.org"),/\.js$/.test(e)&&l(await t(e))}async function o(e){let n=new URL(e.url);if(!n.href||!/\.js(\?.+)?/.test(n.href))return;let o=e.alias??/.+\/([\w\d]+)/.exec(n.pathname)[1],r=e.entry??null;l(await t(n.href,o,r))}function l(e){let t=document.createElement("script");t.type="text/javascript",t.text=e,document.head.appendChild(t),t.remove()}globalThis.lib||(globalThis.lib=e),globalThis.AddLibraries=function(...e){globalThis.glib||(globalThis.glib={}),"object"!=typeof e&&(e=[e]);for(let t=0;t<e.length;t++)/^\.\//.test(e[t])?n(e[t]):o({url:e[t]})},globalThis.AddVModule=function(e,t){function n(){return t}Array.isArray(e)?e.forEach(e=>lib[e]=n):lib[e]=n},globalThis.RemVModule=function(e){let t=0,n=setInterval(()=>{lib[e]&&delete lib[e],!lib[e]&&(t>3367&&clearInterval(n),t++)},10)}},function(){this.duration=6750,globalThis.Log=[],globalThis.SetLogger=function(e){let t=define.get("keepAtLog")??[];function n(n,o,l){if(void 0===n&&void 0!==o)return;let r=document.createElement(e.tagName);o.duration=o.duration??this.duration;for(let i=0;i<t.length;i++)r.setAttribute(t[i],e.getAttribute(t[i]));o.white&&r.style.setProperty("white-space","break"===o.white?"pre-line":"nowrap"),o.name&&(r.id=o.name),o&&Object.keys(o).forEach(e=>r.style.setProperty(e,o[e])),r.style.setProperty("animation",define.exist("fadeout")&&o.duration>0?`780ms cubic-bezier(0.55, 0.09, 0.68, 0.53) ${o.duration}ms both ${define.get("fadeout")}`:"none"),o.html?r.innerHTML=n:r.textContent=n,l.appendChild(r),Log.push(r)}"string"==typeof e&&(e=document.querySelector(`[is*='${e}']`));try{if(e.tagName){let o=e.parentNode,l={duration:this.duration,white:"break"};globalThis.log=(...e)=>n(e.join(),l,o),globalThis.deb=(e,t={...l,html:!0})=>n(e,t,o),e.remove()}}catch{}}},function(){let e=comp=null;globalThis.SetLinkModal=function(t=[],n={}){t.forEach(t=>{0===t.type?(e=t.component.parentElement,comp=t.component,t.component.remove()):1===t.type&&t.component&&t.component.addEventListener("click",e=>{n[t.details](e,comp)})})},globalThis.floatLinkModal=function(t){e.appendChild(comp),comp.querySelector("[is='modal-url']").textContent=t,comp.dataset.modalState=1}},function(){globalThis.SetRender=function(e){globalThis.render=this.render=document.querySelector(e)},globalThis.openRender=function(){let e=document.querySelector("#command-label");e.textContent===define.get("baseSymbol")&&(e.textContent="#render"),bind("/",function e(t){t.preventDefault(),openCLI(()=>bind("/",e)),bind("escape",e=>{closeCLI(),unbind(e.key)}),unbind(t.key)});let t=document.createElement("div");t.style.background="#000000",globalThis.render.appendChild(t)}},function(){globalThis.SetScrollable=function(e){let t=document.querySelectorAll(`[is*='${e}']`),n=e=>e.scrollTo(e.scrollWidth,e.scrollHeight),o=e=>e.children.length>0?o(e.children[0]):e;t.forEach(e=>{let t=new MutationObserver(()=>n(e));t.observe(o(e),{childList:!0})})}},function(){let e=value=null;globalThis.SetTerminal=function(t){value=(e=document.querySelector(`[is*='${define.get("placeholderOfTerminal")??"placeholder"}']`)).getAttribute("data-placeholder");let n=document.querySelector(`[is*='${t}']`);n.focus(),setInterval(()=>e.style.opacity=0===n.innerHTML.length?1:0,10),n.addEventListener("keydown",e=>{e.shiftKey&&(90===e.which||13===e.which)?e.preventDefault():13===e.which&&(e.preventDefault(),/\S+/.test(n.textContent)&&(PostCommand(n.textContent),n.textContent=""))}),n.addEventListener("paste",e=>{e.preventDefault(),document.execCommand("insertHTML",!1,(e.originalEvent||e).clipboardData.getData("text/plain"))})},globalThis.SetPlaceholder=(t=null)=>e.setAttribute("data-placeholder",t??value),globalThis.cli=e=>PostCommand(e),globalThis.openCLI=function(e){let t=document.querySelector("[is='cli-window']"),n=t.querySelector("[is*='terminal']"),o="120ms ease-in-out 0ms both",l=["blur",()=>{t.style.setProperty("animation",define.exist("animateCli")?`${o} ${define.get("animateCli")[1]}`:"none"),n.removeEventListener(...l),e()}];t.style.setProperty("animation",define.exist("animateCli")?`${o} ${define.get("animateCli")[0]}`:"none"),n.addEventListener(...l),n.focus()},globalThis.closeCLI=function(){let e=document.querySelector("[is='cli-window']"),t=e.querySelector("[is*='terminal']");t.blur()}},]);