!function(e){"use strict";function n(e,...n){__dev__()?console.group(e):console.groupCollapsed(e),n.forEach(e=>void 0===e||(Array.isArray(e)?console.log(...e):console.log(e))),console.groupEnd()}document.addEventListener("DOMContentLoaded",()=>{for(let o of([HTMLAnchorElement,HTMLAreaElement,HTMLAudioElement,HTMLBRElement,HTMLBaseElement,HTMLBodyElement,HTMLButtonElement,HTMLCanvasElement,HTMLDListElement,HTMLDataElement,HTMLDataListElement,HTMLDialogElement,HTMLDivElement,HTMLDocument,HTMLElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFormControlsCollection,HTMLFormElement,HTMLFrameSetElement,HTMLHRElement,HTMLHeadElement,HTMLHeadingElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLLIElement,HTMLLabelElement,HTMLLegendElement,HTMLLinkElement,HTMLMapElement,HTMLMediaElement,HTMLMetaElement,HTMLMeterElement,HTMLModElement,HTMLOListElement,HTMLObjectElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOptionsCollection,HTMLOutputElement,HTMLParagraphElement,HTMLPictureElement,HTMLPreElement,HTMLProgressElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableColElement,HTMLTableElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTemplateElement,HTMLTextAreaElement,HTMLTimeElement,HTMLTitleElement,HTMLTrackElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement,].forEach(e=>{e.prototype.query=globalThis.query,e.prototype.query0=globalThis.query0}),query0("html").lang="en",n("DOM Content has been loaded",`Performance: ${performance.now().toFixed(2)}ms`,`Language: ${query0("html").lang}`,"Locale: false"),e))o();n("while loading",`Performance: ${performance.now().toFixed(2)}ms`,"Querystring: false",`Fabs: ${e.length}`)}),window.onload=()=>{var e,o;n("All resources has loaded",`Performance: ${performance.now().toFixed(2)}ms`,`Resources: ${performance.getEntriesByType("resource").length}`),query0("html").removeAttribute("style"),e=["./e/readme.js"],o=()=>{bind("@enter",()=>{let e=query0(define.get("&c1"));document.activeElement!==e&&e.focus()}),bind("tab",e=>{e.preventDefault();let n=query0(define.get("&c1")),o=n.textContent,r=Object.keys(lib);if(document.activeElement===n&&0<o.length&&!lib[o]){caches.ac_spell=o,caches.ac_index=0;let i=r.filter(e=>e.startsWith(o)).sort(),s=i[caches.ac_index];void 0!==s&&(n.textContent=s)}else if(caches.ac_index>=0&&0<o.length){caches.ac_index+=1;let c=r.filter(e=>e.startsWith(caches.ac_spell)).sort(),d=c[caches.ac_index];void 0===d&&(caches.ac_index=0,d=c[caches.ac_index]),n.textContent=d}!function(e){let o=window.getSelection(),r=document.createRange();o.removeAllRanges(),r.selectNodeContents(e),r.collapse(!1),o.addRange(r),n.focus()}(n)})},ObjectDefinition({"&s0":"town","&s1":"marker","&s2":"fadeoutMsg","&u0":"https://cdn.mesatown.org","&c0":"!#cli-window","&c1":"!#*cli-text","&c2":"#cli-label","&c3":"!#*cli-marker","&a0":["class","style"],"&a1":["cliInvi","cliHide"],"&a2":["./e/ocsc4i.js","./std/bind.js","./std/clear.js","./std/close.js","./std/help.js","./std/mod.js","./std/unmod.js"]}),SetLogger("!#*logger"),SetTerminal(define.get("&c1")),SetScrollable("!#*scroll"),SetRender("#render"),SetLinkModal([{type:0,component:query0("!#*modal link")},{type:1,void:"connect",component:query0("!#*modal-0")},{type:1,void:"cancel",component:query0("!#*modal-1")},{type:1,void:"cancel",component:query0("!#modal_blank")},],{cancel:(e,n)=>n.dataset.modalState=0,connect(e,n){let o=n.query0("!#modal-url").textContent;window.open(o,"_blank"),n.dataset.modalState=0}}),AddLibraries(...e),o({}),-1!=platform.name.indexOf("Safari")&&"pure"===query0("body").dataset.framework&&(console.warn("The bug has been found where elements are not visible when scrolling in Safari."),deb("⚠ The bug has been found where elements are not visible when scrolling in Safari.",{color:"rgb(136, 55, 56)",duration:0})),console.warn("Do not enter or paste unknown code")}}([function e(){let n=/close|home/,o=null,r=null;function i(e,n){if(e.require&&n.length>0){let o=[];for(let r=0;r<e.require.length;r++){let i=e.require[r].toLowerCase(),s=/str|string/.test(i)?"string":/num|number|numeric/.test(i)?"number":/bool|boolean/.test(i)?"boolean":/any/.test(i)?"any":"undefined";if(o.push(s),/\w+\*$/.test(i)){for(let c=0;c<n.length-(r+1);c++)o.push(s);break}}if(n.length>=o.length){let d=!1;for(let u=0;u<o.length;u++)switch(o[u]){case"string":n[u]=String(n[u]);break;case"number":d=!/^\d+$/.test(n[u]),n[u]=Number(parseInt(n[u]));break;case"boolean":d=!/^(true|false)$/i.test(n[u]),n[u]=Boolean(/true/i.test(n[u]));break;case"any":n[u]=/^(true|false)$/i.test(n[u])?Boolean(/true/i.test(n[u])):/^\d+$/.test(n[u])?Number(parseInt(n[u])):String(n[u])}d||e.execute(n)}}else{if(e.require&&!(e.require.length<=0))return{unsatisfied:e=>e()};e.execute()}return{unsatisfied(){}}}function s(e="",n,o,r){n||(n="");let i=e.substring(0,o),s=e.substring(o+1,e.length);return o>=r?e.substring(0,r):`${i}${n}${s}`}function c(e){if(n.test(e)&&(e=o),r){let i=r.textContent,[c,d]=[i.split(""),e.split("")].map(e=>e.length),u=0<=c-d?c:d;for(let $=0;$<u;$++)(n=>{setTimeout(()=>{i=s(i,e[n],n,d),r.textContent=i},80*(n/1.257))})($)}}set=null,globalThis.PostCommand=e=>{o||(o=define.get("&s0")),r||(r=query0(define.get("&c2"))),set||(set=setMarker),(function e(n){let o=`${n}␛`.split(""),r=[],i=[],s=[],c=!1,d=!1,u=!1;for(let $=0;$<o.length;$++){if(/\u241B/.test(o[$])){i.push(s.join("")),r.push(i.filter(e=>e)),s=[],i=[];break}u?(s.push(o[$]),u=!1):/\%/.test(o[$])?c||d||(i.push(s.join("")),r.push(i.filter(e=>e)),s=[],i=[]):/'/.test(o[$])?c||d?c?(i.push(s.join("")),s=[],c=!1):s.push(o[$]):c=!0:/"/.test(o[$])?c||d?d?(i.push(s.join("")),s=[],d=!1):s.push(o[$]):d=!0:/\\/.test(o[$])?u?(s.push(o[$]),u=!1):u=!0:/\s/.test(o[$])?c||d?s.push(o[$]):(i.push(s.join("")),s=[]):s.push(o[$])}return{end:e=>r.forEach(n=>e(n))}})(e).end(e=>{let[s,...d]=e,u=r.textContent.replace(/\s+/g,"");if(u!==o&&lib[u]){let $=lib[u]();n.test(s)?($.oncomplete&&$.oncomplete(),c(o),set&&set()):lib[u]&&i($,[s,...d]).unsatisfied(()=>{})}else if(!n.test(s)&&lib[s]){let f=lib[s]();i(f,d).unsatisfied(()=>{d.length<=0&&(f.onstart&&f.onstart(),c(s),set&&f.marker&&set(f.marker||""))})}else if(n.test(s)){let p=lib[s]();p.oncomplete&&p.oncomplete(),c(o),set&&set()}})}},function e(){globalThis.define={get:function(e){return this[e]},exist:function(e){return!!this[e]},clear:function(e){Object.keys(this).filter(n=>!RegExp(`get|exist|clear|${e.source}`,e.flags).test(n)).forEach(e=>delete this[e])}},globalThis.ObjectDefinition=function(e){Object.entries(e).forEach(([e,n])=>globalThis.define[e]=n)}},function e(){let n={};globalThis.unbind=function(e){delete n[e]},globalThis.bind=function(o,r){n[o]=r,["keyup","keydown"].forEach(o=>window[`on${o}`]||(window[`on${o}`]=o=>(function e(n,o){let r=Object.keys(o);r.forEach(e=>{let r=function e(n){n=n.toLowerCase();let o=/^@/.test(n)?1:0;n=o>0?n.replace(/^(@)/,""):n;let r={key:null,ctrl:!1,shift:!1,alt:!1,meta:!1,type:1===o?"keyup":0===o?"keydown":"input"},i=n.split(/\+/);for(let s=0;s<i.length;s++){let c=i[s],d=i.length-1;s===d&&(r.key=c),c in r&&(r[c]=!0)}return r}(e);n.key.toLowerCase()===r.key&&n.type===r.type&&n.altKey===r.alt&&n.ctrlKey===r.ctrl&&n.metaKey===r.meta&&n.shiftKey===r.shift&&o[e](n)})})(o,n)))}},function e(){async function n(e,n,o){n||(n=/.+\/([\w\d]+)/.exec(e)[1]),o||(o="main");let r=await fetch(e).then(e=>e.text()),i=`(()=>{${r};globalThis.lib.${n}=${o}})()`.replace(/\r\n\s+/g,"\r\n ").replace(/;$/g,"");return i}async function o(e){let o=/((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$)|(^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))|(\u006c\u006f\u0063\u0061\u006c\u0068\u006f\u0073\u0074)/gm.test(location.hostname)?e:e.replace(/^\./,define.get("&u0"));/\.js$/.test(o)&&i(await n(o))}async function r(e){(e=new URL(e)).href&&/\.js(\?.+)?/.test(e.href)&&i(await n(e.href,/.+\/([\w\d]+)/.exec(e.pathname)[1]))}function i(e){let n=document.createElement("script");n.type="text/javascript",n.text=e,document.head.appendChild(n),n.remove()}globalThis.lib||(globalThis.lib=new Proxy({},{get:(e,n)=>n in e?e[n]:void 0,set(e,n,o){let r=o().onload;r&&r(),e[n]=o}})),globalThis.AddLibraries=function(...e){"object"!=typeof e&&(e=[e]);for(let n=0;n<e.length;n++)/^\.\//.test(e[n])?o(e[n]):r(e[n])},globalThis.AddVModule=function(e,n){function o(){return n}return Array.isArray(e)?e.forEach(e=>lib[e]=o):lib[e]=o,e},globalThis.RemVModule=function(e){let n=setInterval(()=>lib[e]&&delete lib[e]||n++,10)}},function e(){this.duration=6750,globalThis.Log=[],globalThis.SetLogger=function(e){let n=define.get("&a0")??[];function o(o,r,i){if(void 0===o&&void 0!==r)return;let s=document.createElement(e.tagName);r.duration=r.duration??this.duration;for(let c=0;c<n.length;c++)s.setAttribute(n[c],e.getAttribute(n[c]));r.white&&s.style.setProperty("white-space","break"===r.white?"pre-line":"nowrap"),r.name&&(s.id=r.name),r&&Object.keys(r).forEach(e=>s.style.setProperty(e,r[e])),s.style.setProperty("animation",define.exist("&s2")&&r.duration>0?`780ms cubic-bezier(0.55, 0.09, 0.68, 0.53) ${r.duration}ms both ${define.get("&s2")}`:"none"),r.html?s.innerHTML=o:s.textContent=o,i.appendChild(s),Log.push(s)}"string"==typeof e&&(e=query0(e));try{if(e.tagName){let r=e.parentNode,i={duration:this.duration,white:"break"};globalThis.log=(...e)=>o(e.join(),i,r),globalThis.deb=(e,n={...i,html:!0})=>o(e,n,r),e.remove()}}catch{}}},function e(){let n=comp=null;globalThis.SetLinkModal=function(e=[],o={}){e.forEach(e=>{0===e.type?(n=e.component.parentElement,comp=e.component,e.component.remove()):1===e.type&&e.component&&e.component.addEventListener("click",n=>o[e.void](n,comp))})},globalThis.floatLinkModal=function(e){n.appendChild(comp),comp.query0("!#modal-url").textContent=e,comp.dataset.modalState=1}},function e(){let n;globalThis.SetRender=function(e){globalThis.render=query0(e)},globalThis.openRender=function(){let e=query0(define.get("&c2"));e.textContent===define.get("&s0")&&(e.textContent="#render"),bind("/",function e(n){n.preventDefault(),openCLI(()=>bind("/",e)),bind("escape",e=>{closeCLI(),unbind(e.key)}),unbind(n.key)}),bg=document.createElement("div"),ps=document.createElement("span"),bg.style.background="#000000",bg.style.pointerEvents="all",ps.style.position="fixed",ps.style.opacity=0,ps.setAttribute("tabindex",0),ps.setAttribute("contenteditable",!0),globalThis.render.appendChild(bg),globalThis.render.appendChild(ps),n=setInterval(()=>document.activeElement===ps||(ps.focus(),setTimeout(()=>clearInterval(n),100)),10)},globalThis.closeRender=function(){globalThis.render.innerHTML="",query0(define.get("&c0")).style.removeProperty("animation")}},function e(){globalThis.SetScrollable=function(e){let n=query(e),o=e=>e.scrollTo(e.scrollWidth,e.scrollHeight),r=e=>e.children.length>0?r(e.children[0]):e;n.forEach(e=>{let n=new MutationObserver(()=>o(e));n.observe(r(e),{childList:!0})})}},function e(){let n=null,o=null;globalThis.SetTerminal=function(e){o=(n=query0(define.get("&c3")??"!#placeholder")).getAttribute("data-marker");let r=query0(e);r.focus(),r.addEventListener("keydown",e=>{e.shiftKey&&(90===e.which||13===e.which)?e.preventDefault():13===e.which&&(e.preventDefault(),/\S+/.test(r.textContent)&&(PostCommand(r.textContent),r.textContent=""))}),r.addEventListener("paste",e=>{e.preventDefault(),document.execCommand("insertHTML",!1,(e.originalEvent||e).clipboardData.getData("text/plain"))}),setInterval(()=>n.style.opacity=0===r.textContent.length?1:0,10)},globalThis.setMarker=(e=null)=>{n.setAttribute(`data-${define.get("&s1")}`,e??o)},globalThis.cli=e=>PostCommand(e),globalThis.openCLI=function(e){let n=query0(define.get("&c0"));t=n.query0(define.get("&c1")),a="120ms ease-in-out 0ms both",l=["blur",()=>{n.style.setProperty("animation",define.exist("&a1")?`${a} ${define.get("&a1")[1]}`:"none"),t.removeEventListener(...l),e()}],n.style.setProperty("animation",define.exist("&a1")?`${a} ${define.get("&a1")[0]}`:"none"),t.addEventListener(...l),t.focus()},globalThis.closeCLI=function(){let e=query0(define.get("&c0")).query0(define.get("&c1"));e.blur()}}],!function(){let e={eval:"abdit",reload:Function("location.reload()"),query:function(e){let n=/^(!#)([~\|^$*])?(.+)/;return document.querySelectorAll(n.test(e)?e.replace(n,"[is$2='$3']"):e)},query0:function(e){let n=/^(!#)([~\|^$*])?(.+)/;return document.querySelector(n.test(e)?e.replace(n,"[is$2='$3']"):e)},__dev__:Function('return !!localStorage.getItem("has-dev-mode")'),__version__:"0.8"};for(let n in e)globalThis[n]=e[n]}(),!async function(){for(;;)query("a").forEach(e=>{function n(e){e.preventDefault(),("click"===e.type||"auxclick"===e.type&&1===e.button)&&floatLinkModal(e.target.href)}e.onclick||e.onclick===n||(e.onclick=n),e.onauxclick||e.onauxclick===n||(e.onauxclick=n),e.oncontextmenu||e.oncontextmenu===n||(e.oncontextmenu=n)}),"abdit"===globalThis.eval||reload(),await new Promise(e=>setTimeout(e,10))}());
